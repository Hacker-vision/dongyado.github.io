---
layout: post
title: A*寻路的原理和实现 
date: 2015-08-5 12:33:18.000000000 +08:00
categories:
- Algorithm
tags: [Algorithm]
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  views: '1'
author:
  login: slayer
  email: dongyado@gmail.com
  display_name: slayer
  first_name: ''
  last_name: ''
description: 'A*寻路算法是一个游戏开发讨论最多，而且相当有趣的一个算法'
---
平时很少玩游戏，一年一共都不上十次，玩的最多的可能是老掉牙的CS和求生之路， 都是一些FPS游戏，沉迷于打打杀杀的刺激。一直知道游戏的开发是比较复杂的，也不曾去深究。

前段时间给屋里那位买了个WINDOWS平板，里面的扫雷很是不错，角色和玩法是我第一次见的，所以玩的比较多，其中有个很奇妙的现象，吸引了我，那个扫雷的小人可以从障碍中（可能只有一个出口）走出来到鼠标点击的地方，想到了这其中肯定应用了寻路算法。

请教了一下谷歌娘，发现讨论了最多的就是A*算法，初步看了一下，觉得很有趣，就添加到了TODO list里面，准备花点时间学习一下。

### 什么是A*算法
A*（A-Star)算法是一种静态路网中求解最短路径最有效的直接搜索方法。在包含各种障碍物的地图中，为游戏角色的移动，寻找一条到目标地点最短路径。这个算法不同于A算法，是因为使用了一个启发函数，用来趋势每一步的走向。

### A*算法原理
本文使用了那套最经典的图（来自[A* Pathfinding for Beginners](http://www.policyalmanac.org/games/aStarTutorial.htm)，感谢原作者的制作)

![image1](http://pic002.cnblogs.com/images/2011/70278/2011052614224354.jpg)

游戏中的地图，都可以看成一个方块集合。上图A表示起点，B表示终点，蓝色方块表示障碍物，我们需要找出一条路，从A点开始，绕过蓝色方块，到达B点。

#### 寻路步骤
首先说一下用到的名词：

* 开放列表：记录没有检查过的方格
* 关闭列表：记录已经检查过的方格 

步骤

1. 把A放入开放列表
2. 找出从A点开始移动一步能到达的方块并加入到开放列表，就是环绕A点的方块，如果是障碍物就不加入开放列表
3. 把A点从开放列表删除，并加入关闭列表，因为A点已经被检查过了 

![image1](http://pic002.cnblogs.com/images/2011/70278/2011052522372596.jpg) 

上图绿色边框的方块表示已经加入开发列表，等待下一次检查；中间淡蓝色边框则表示已经被加入关闭列表，不需要再次检查。

然后进入下一步， 从开放列表中找出下一步的要走的方格，那怎么确定下一步要走的方格？


A*算法的核心在于使用下面的函数：

    F=G+H

    G 表示从起点方格移动到网格上指定方格的移动耗费 (可沿斜方向移动).
    H 表示从指定的方格移动到终点方格的预计耗费 (H启发函数).
    

### A*算法实现

学习过程中参考的最多的是create chen的[那篇文章](http://www.cnblogs.com/technology/archive/2011/05/26/2058842.html)，对我了解A*有很大的帮助。 本文的出发点，是把自己的对A* 的理解按照自己的思路写出来，作为总结和备忘。
